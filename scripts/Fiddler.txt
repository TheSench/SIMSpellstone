

static function OnBeforeResponse(oSession: Session) {
    if (m_Hide304s && oSession.responseCode == 304) {
        oSession["ui-hide"] = "true";
    }
    if (oSession.HostnameIs("spellstone.synapse-games.com")) {
        if (oSession.PathAndQuery.indexOf("message=startCampaign") > 0
        || oSession.PathAndQuery.indexOf("message=startHuntingBattle") > 0
        || oSession.PathAndQuery.indexOf("message=fightGuildWar") > 0
        || oSession.PathAndQuery.indexOf("message=startClashBattle") > 0
        || oSession.PathAndQuery.indexOf("message=fightGuildMember") > 0
        || oSession.PathAndQuery.indexOf("message=playCard") > 0
        || oSession.PathAndQuery.indexOf("getBattleResults") > 0) {) {
            oSession.utilDecodeResponse();
            oSession.SaveResponseBody("C:\\Users\\jsen\\Desktop\\JSEN\\BattleTest\\battle.json");
        }
    }
}